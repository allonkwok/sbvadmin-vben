import{B as D}from"./TableImg.e794404e.js";import{l as I}from"./BasicForm.65e5c1fa.js";import{u as v}from"./useTable.232dc09d.js";import{i as E,j as M}from"./System.2c591569.js";import{P}from"./index.d0f3d60a.js";import R from"./DeptTree.4c08c9de.js";import{A as U}from"./index.b430c57d.js";import{b as V}from"./index.e12d43d2.js";import{A as W,c as $,s as N}from"./UserModal.52f4f152.js";import{aw as j,a as x,aZ as z,w as H,ay as t,o as r,j as p,z as a,n as c,B as C,h as S,F as B,aB as F,t as w,l as L}from"./index.4ad633c8.js";import{A as O}from"./index.f56e4d49.js";import{T as Z}from"./index.9593ccac.js";import"./index.3cc4bdcd.js";import"./Checkbox.a821fd3b.js";import"./index.0d55e67e.js";import"./index.6e59dfda.js";import"./eagerComputed.39efc112.js";import"./useForm.7493826a.js";import"./index.3af6685b.js";import"./index.ec508b52.js";import"./uuid.2b29000c.js";import"./index.96cf4f3f.js";import"./_baseIteratee.c4bc7574.js";import"./get.d23a6385.js";import"./DeleteOutlined.3c5003db.js";import"./index.ed336f06.js";import"./useRefs.33304b10.js";import"./Form.1dd3fdc6.js";import"./Col.800feb1a.js";import"./useFlexGapSupport.221af0d9.js";import"./useSize.4cbf3b62.js";import"./useWindowSizeFn.355c37f0.js";import"./index.ee361b1f.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.437f9cf9.js";import"./FullscreenOutlined.36fb76e2.js";import"./index.869804c4.js";import"./fromPairs.84aabb58.js";import"./scrollTo.3ac5deba.js";import"./index.c2d5a44a.js";/* empty css              *//* empty css              */import"./index.8a4a8e76.js";import"./transButton.fadc548c.js";import"./index.dd7b1cb6.js";import"./index.3d34d703.js";import"./download.a1a9703f.js";import"./base64Conver.08b9f4ec.js";import"./index.74fb7fff.js";import"./index.ae6cbd88.js";import"./uniqBy.1ec4c51f.js";import"./index.31b769f7.js";import"./useContentViewHeight.51253122.js";import"./ArrowLeftOutlined.faebd3b9.js";import"./index.671bbb03.js";import"./index.e8ca4ebc.js";import"./useContextMenu.56916c3c.js";import"./Dept.198b3f57.js";const G=x({name:"AccountManagement",components:{BasicTable:D,PageWrapper:P,AccountModal:W,TableAction:I,Avatar:O,Tag:Z,Authority:U,DeptTree:R},setup(){const o=z(),[k,{openModal:d}]=V(),f=H({}),[A,{reload:m,updateTableDataRecord:h}]=v({title:"\u8D26\u53F7\u5217\u8868",api:E,rowKey:"id",columns:$,formConfig:{labelWidth:120,schemas:N,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(e){return e},actionColumn:{width:120,title:"\u64CD\u4F5C",dataIndex:"action"}});function g(){d(!0,{isUpdate:!1})}function _(e){d(!0,{record:e,isUpdate:!0})}function y(e){e.id,M(e.id).then(n=>{}).catch(n=>{}).finally(()=>{m()})}function u({isUpdate:e,values:n}){if(e){const i=h(n.id,n)}else m()}function b(e=""){f.deptId=e,m()}function T(e){o("/system/account_detail/"+e.id)}return{registerTable:A,registerModal:k,handleCreate:g,handleEdit:_,handleDelete:y,handleSuccess:u,handleSelect:b,handleView:T,searchInfo:f}}});function K(o,k,d,f,A,m){const h=t("DeptTree"),g=t("a-button"),_=t("Authority"),y=t("Avatar"),u=t("Tag"),b=t("TableAction"),T=t("BasicTable"),e=t("AccountModal"),n=t("PageWrapper");return r(),p(n,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:a(()=>[c(h,{class:"w-1/4 xl:w-1/5",onSelect:o.handleSelect},null,8,["onSelect"]),c(T,{onRegister:o.registerTable,class:"w-3/4 xl:w-4/5",searchInfo:o.searchInfo},{toolbar:a(()=>[c(_,{value:"/api/users|POST"},{default:a(()=>[c(g,{type:"primary",onClick:o.handleCreate},{default:a(()=>[C("\u65B0\u589E\u8D26\u53F7")]),_:1},8,["onClick"])]),_:1})]),bodyCell:a(({column:i,record:s})=>[i.key==="avatar"?(r(),p(y,{key:0,size:60,src:s.avatar},null,8,["src"])):i.key==="roles"?(r(!0),S(B,{key:1},F(s.roles,l=>(r(),p(u,{key:l.name,color:"green"},{default:a(()=>[C(w(l.nameZh),1)]),_:2},1024))),128)):i.key==="depts"?(r(!0),S(B,{key:2},F(s.depts,l=>(r(),p(u,{key:l.id,color:"green"},{default:a(()=>[C(w(l.name),1)]),_:2},1024))),128)):i.key==="action"?(r(),p(b,{key:3,actions:[{icon:"clarity:info-standard-line",tooltip:"\u67E5\u770B\u7528\u6237\u8BE6\u60C5",onClick:o.handleView.bind(null,s)},{icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91\u7528\u6237\u8D44\u6599",onClick:o.handleEdit.bind(null,s)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"\u5220\u9664\u6B64\u8D26\u53F7",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",placement:"left",confirm:o.handleDelete.bind(null,s)}}]},null,8,["actions"])):L("",!0)]),_:1},8,["onRegister","searchInfo"]),c(e,{onRegister:o.registerModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1})}var Ye=j(G,[["render",K]]);export{Ye as default};
