var v=(t,i,p)=>new Promise((d,m)=>{var _=e=>{try{s(p.next(e))}catch(o){m(o)}},l=e=>{try{s(p.throw(e))}catch(o){m(o)}},s=e=>e.done?d(e.value):Promise.resolve(e.value).then(_,l);s((p=p.apply(t,i)).next())});import{au as b,a as w,cD as I,C as D,s as E,N as S,fL as k,f as F,aw as n,o as C,j as B,z as r,n as a,B as f,h as U,F as T,az as R,t as N,i as V,E as $}from"./index.a3482497.js";import{T as x}from"./index.c7a1afab.js";/* empty css              */import{D as M}from"./index.6d61c417.js";import{B as z}from"./BasicForm.e0e0ece8.js";import"./componentMap.467f5056.js";import{u as L}from"./useForm.01b01243.js";import"./RadioButtonGroup.58e80efc.js";import{a as j}from"./index.b218cf81.js";import{h as G}from"./header.d801b988.js";import{b as P}from"./data.5adb4b62.js";import{u as W}from"./upload.a43059ec.js";import{e as A}from"./System.ea4ecdef.js";import{R as Z}from"./index.0cd2b4d5.js";import{C as q}from"./index.7da124a4.js";/* empty css              */import"./FormItem.vue_vue_type_script_lang.ed1df8ed.js";import"./index.45d53aba.js";import"./_baseIteratee.cc596e32.js";import"./get.48b724f1.js";import"./DeleteOutlined.feb25f86.js";import"./index.d63ee733.js";import"./useRefs.bb17924d.js";import"./Form.a6fc1c44.js";import"./Col.06363816.js";import"./useFlexGapSupport.c0d68dd8.js";import"./useSize.133c759a.js";import"./uniqBy.97c3dc88.js";import"./index.4724000a.js";import"./useWindowSizeFn.d7251f20.js";import"./FullscreenOutlined.92f2efed.js";import"./index.8d5d3503.js";import"./Checkbox.0bdd2b18.js";import"./index.9376db74.js";import"./index.0b7f07db.js";import"./index.2e8c53a3.js";import"./index.5ffffb17.js";import"./index.83536ca6.js";import"./useFormItem.9bc81bfa.js";import"./index.e280e2bf.js";import"./eagerComputed.fd853f3b.js";import"./transButton.d716ac6c.js";import"./index.7b4fe9fb.js";import"./index.f0aeca6f.js";import"./index.f68b4e73.js";import"./isNumber.db25cdd5.js";import"./uuid.2b29000c.js";import"./download.4bece761.js";import"./base64Conver.08b9f4ec.js";import"./index.ca00f92f.js";import"./index.6b9bae6c.js";import"./index.1da7c209.js";import"./index.37b1674c.js";const H=w({components:{Tag:x,BasicForm:z,CollapseContainer:I,Button:D,ARow:Z,ACol:q,CropperAvatar:j,Divider:M},setup(){const{createMessage:t}=$(),i=E(),[p,{setFieldsValue:d,validate:m}]=L({labelWidth:120,schemas:P,showActionButtonGroup:!1});S(()=>v(this,null,function*(){const o=yield k();d(o)}));const _=F(()=>{const{avatar:o}=i.getUserInfo;return o||G}),l=F(()=>{const{roles:o}=i.getUserInfo;return o||[]});function s({source:o,data:u}){const c=i.getUserInfo;c.avatar=o,i.setUserInfo(c);const g={id:c.userId,avatar:u.result};A(g).then(()=>{t.success("\u4FEE\u6539\u6210\u529F!")}).catch(()=>{t.error("3")}).finally(()=>{})}function e(){return v(this,null,function*(){const o=yield m();A(o).then(u=>{t.success(u)}).catch(()=>{t.error("3")}).finally(()=>{})})}return{avatar:_,roles:l,register:p,uploadApi:W,updateAvatar:s,handleSubmit:e}}}),J={class:"change-avatar"};function K(t,i,p,d,m,_){const l=n("BasicForm"),s=n("a-col"),e=n("Divider"),o=n("Tag"),u=n("a-row"),c=n("CropperAvatar"),g=n("Button"),y=n("CollapseContainer");return C(),B(y,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:r(()=>[a(u,{gutter:24},{default:r(()=>[a(s,{span:14},{default:r(()=>[a(l,{onRegister:t.register},null,8,["onRegister"])]),_:1}),a(s,{span:10},{default:r(()=>[a(e,null,{default:r(()=>[f("\u8D26\u53F7\u89D2\u8272")]),_:1}),a(u,{gutter:24},{default:r(()=>[(C(!0),U(T,null,R(t.roles,h=>(C(),B(o,{key:h.value,color:"green"},{default:r(()=>[f(N(h.nameZh),1)]),_:2},1024))),128))]),_:1}),a(e,null,{default:r(()=>[f("\u5934\u50CF")]),_:1}),a(u,{gutter:24},{default:r(()=>[V("div",J,[a(c,{uploadApi:t.uploadApi,value:t.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:t.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1})]),_:1}),a(g,{type:"primary",onClick:t.handleSubmit},{default:r(()=>[f(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}var Qo=b(H,[["render",K],["__scopeId","data-v-941958e6"]]);export{Qo as default};
