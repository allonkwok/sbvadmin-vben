var _=Object.defineProperty,y=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var b=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var I=(e,o,t)=>o in e?_(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,m=(e,o)=>{for(var t in o||(o={}))A.call(o,t)&&I(e,t,o[t]);if(b)for(var t of b(o))C.call(o,t)&&I(e,t,o[t]);return e},F=(e,o)=>y(e,M(o));var g=(e,o,t)=>new Promise((r,i)=>{var p=s=>{try{u(t.next(s))}catch(l){i(l)}},c=s=>{try{u(t.throw(s))}catch(l){i(l)}},u=s=>s.done?r(s.value):Promise.resolve(s.value).then(p,c);u((t=t.apply(e,o)).next())});import{B as P,a as k}from"./index.e12d43d2.js";import{B as x}from"./BasicForm.65e5c1fa.js";import{u as S}from"./useForm.7493826a.js";import{dK as f,aw as $,a as w,v as D,k as d,f as R,ay as v,o as q,j as L,z as N,n as O,az as U}from"./index.4ad633c8.js";const Y=e=>f.get({url:"/dicts",params:e}),j=e=>f.post({url:"/dicts",data:e}),z=e=>f.put({url:"/dicts/"+e.id,data:e}),Z=e=>f.delete({url:"/dicts/"+e}),ee=[{title:"ID",dataIndex:"id",sorter:!0},{title:"\u7236\u7EA7ID",dataIndex:"pid"},{title:"\u5B57\u5178\u7C7B\u578B",dataIndex:"type"},{title:"\u5B57\u5178\u503C",dataIndex:"value"},{title:"\u5B57\u5178\u540D",dataIndex:"label"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u6392\u5E8F",dataIndex:"sort"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"updatedAt"}],te=[{field:"id",label:"ID",component:"Input",colProps:{span:8}},{field:"createdAt",component:"RangePicker",label:"\u521B\u5EFA\u65E5\u671F",colProps:{span:8}}],T=[{field:"id",label:"ID",component:"InputNumber",dynamicDisabled:!0},{field:"pid",label:"\u7236\u7EA7ID",component:"InputNumber",required:!0,defaultValue:0},{field:"type",label:"\u5B57\u5178\u7C7B\u578B",component:"Input",required:!0},{field:"value",label:"\u5B57\u5178\u503C",component:"Input",required:!0},{field:"label",label:"\u5B57\u5178\u540D",component:"Input",required:!0},{field:"description",label:"\u63CF\u8FF0",component:"Input"},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber"},{field:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",component:"DatePicker"},{field:"updatedAt",label:"\u4FEE\u6539\u65F6\u95F4",component:"DatePicker"}],V=w({name:"DictModal",components:{BasicModal:P,BasicForm:x},emits:["success","register"],setup(e,{emit:o}){const t=D(!0),r=D(""),[i,{resetFields:p,setFieldsValue:c,validate:u}]=S({labelWidth:100,baseColProps:{span:24},schemas:T,showActionButtonGroup:!1}),[s,{setModalProps:l,closeModal:B}]=k(a=>g(this,null,function*(){p(),l({confirmLoading:!1}),t.value=!!(a!=null&&a.isUpdate),d(t)&&(r.value=a.record.id,c(m({},a.record)))})),h=R(()=>d(t)?"\u7F16\u8F91":"\u65B0\u589E");function E(){return g(this,null,function*(){try{const a=yield u();l({confirmLoading:!0}),d(t)?z(a).then(n=>{}).catch(n=>{}).finally(()=>{B(),o("success",{isUpdate:d(t),values:F(m({},a),{id:r.value})})}):j(a).then(n=>{}).catch(n=>{}).finally(()=>{o("success",{isUpdate:d(t),values:F(m({},a),{id:r.value})})}),B()}finally{l({confirmLoading:!1})}})}return{registerModal:s,registerForm:i,getTitle:h,handleSubmit:E}}});function G(e,o,t,r,i,p){const c=v("BasicForm"),u=v("BasicModal");return q(),L(u,U(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:N(()=>[O(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var H=$(V,[["render",G]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as D,oe as a,ee as c,Z as d,Y as g,te as s};
