var y=Object.defineProperty;var h=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var D=(e,t,u)=>t in e?y(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,E=(e,t)=>{for(var u in t||(t={}))I.call(t,u)&&D(e,u,t[u]);if(h)for(var u of h(t))P.call(t,u)&&D(e,u,t[u]);return e};var d=(e,t,u)=>new Promise((r,n)=>{var p=o=>{try{l(u.next(o))}catch(s){n(s)}},c=o=>{try{l(u.throw(o))}catch(s){n(s)}},l=o=>o.done?r(o.value):Promise.resolve(o.value).then(p,c);l((u=u.apply(e,t)).next())});import{B as S}from"./BasicForm.34355df1.js";import{u as A}from"./useForm.a05eafb2.js";import{bS as w,b6 as _,a as M,v as R,f as x,k as m,aw as k,E as q,ay as B,o as T,j as V,z as G,n as $,az as N}from"./index.ffcae84d.js";import{T as L}from"./index.dfb4bd27.js";import{B as O,a as U}from"./index.3df19a0e.js";import{b as j}from"./system.f41f1014.js";import{b as z,c as W}from"./system.a6097381.js";const ne=[{title:"\u83DC\u5355\u540D\u79F0",dataIndex:"name",width:200,align:"left"},{title:"\u56FE\u6807",dataIndex:"icon",width:50,customRender:({record:e})=>w(_,{icon:e.icon})},{title:"\u540E\u7AEF\u8BF7\u6C42\u8DEF\u5F84",dataIndex:"requestUrl"},{title:"\u540E\u7AEF\u8BF7\u6C42\u65B9\u5F0F",dataIndex:"requestMethod"},{title:"\u524D\u7AEF\u9875\u9762\u7EC4\u4EF6",dataIndex:"component"},{title:"\u6392\u5E8F",dataIndex:"orderNo",width:50},{title:"\u72B6\u6001",dataIndex:"status",width:80,customRender:({record:e})=>{const u=~~e.status===1,r=u?"green":"red",n=u?"\u542F\u7528":"\u505C\u7528";return w(L,{color:r},()=>n)}},{title:"\u662F\u5426\u663E\u793A",dataIndex:"showFlag"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],f=e=>e===0,g=e=>e===1,F=e=>e===2,le=[{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",colProps:{span:8}},{field:"status",label:"\u72B6\u6001",component:"Select",componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u505C\u7528",value:0}]},colProps:{span:8}}],H=[{field:"type",label:"\u83DC\u5355\u7C7B\u578B",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u76EE\u5F55",value:0},{label:"\u83DC\u5355",value:1},{label:"\u6309\u94AE",value:2}]},colProps:{lg:24,md:24}},{field:"name",label:"\u83DC\u5355\u540D\u79F0",component:"Input",required:!0},{field:"title",label:"\u83DC\u5355\u540D\u79F0i18n",component:"Input"},{field:"id",label:"\u83DC\u5355id",component:"Input",dynamicDisabled:!0},{field:"pid",label:"\u4E0A\u7EA7\u83DC\u5355",component:"TreeSelect",componentProps:{fieldNames:{label:"name",key:"id",value:"id"},getPopupContainer:()=>document.body}},{field:"orderNo",label:"\u6392\u5E8F",component:"InputNumber"},{field:"icon",label:"\u56FE\u6807",component:"IconPicker",required:!0,ifShow:({values:e})=>f(e.type)},{field:"path",label:"\u524D\u7AEF\u9875\u9762\u8DEF\u5F84",component:"Input",required:!0,ifShow:({values:e})=>!F(e.type)},{field:"component",label:"\u524D\u7AEF\u9875\u9762\u7EC4\u4EF6",component:"Input",required:!0,ifShow:({values:e})=>g(e.type)},{field:"requestUrl",label:"\u540E\u7AEF\u8BF7\u6C42\u8DEF\u5F84",component:"Input",ifShow:({values:e})=>!f(e.type)},{field:"requestMethod",label:"\u540E\u7AEF\u8BF7\u6C42\u65B9\u5F0F",component:"Input",ifShow:({values:e})=>!f(e.type)},{field:"status",label:"\u72B6\u6001",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u542F\u7528",value:1},{label:"\u7981\u7528",value:0}]}},{field:"isExt",label:"\u662F\u5426\u5916\u94FE",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>!F(e.type)},{field:"keepalive",label:"\u662F\u5426\u7F13\u5B58",component:"RadioButtonGroup",defaultValue:0,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>g(e.type)},{field:"showFlag",label:"\u662F\u5426\u663E\u793A",component:"RadioButtonGroup",defaultValue:1,componentProps:{options:[{label:"\u5426",value:0},{label:"\u662F",value:1}]},ifShow:({values:e})=>!F(e.type)}],J=M({name:"MenuDrawer",components:{BasicDrawer:O,BasicForm:S},emits:["success","register"],setup(e,{emit:t}){const u=R(!0),[r,{resetFields:n,setFieldsValue:p,updateSchema:c,validate:l}]=A({labelWidth:100,schemas:H,showActionButtonGroup:!1,baseColProps:{lg:12,md:24}}),[o,{setDrawerProps:s,closeDrawer:b}]=U(a=>d(this,null,function*(){n(),s({confirmLoading:!1}),u.value=!!(a!=null&&a.isUpdate),m(u)&&p(E({},a.record));const i=yield j();c({field:"pid",componentProps:{treeData:i}})})),C=x(()=>m(u)?"\u7F16\u8F91\u83DC\u5355":"\u65B0\u589E\u83DC\u5355");function v(){return d(this,null,function*(){try{const a=yield l();s({confirmLoading:!0});const{createMessage:i}=q();m(u)?z(a).then(()=>{i.success("1")}).catch(()=>{i.error("2")}).finally(()=>{b(),t("success")}):W(a).then(()=>{i.success("3")}).catch(()=>{i.error("4")}).finally(()=>{b(),t("success")})}finally{s({confirmLoading:!1})}})}return{registerDrawer:o,registerForm:r,getTitle:C,handleSubmit:v}}});function K(e,t,u,r,n,p){const c=B("BasicForm"),l=B("BasicDrawer");return T(),V(l,N(e.$attrs,{onRegister:e.registerDrawer,showFooter:"",title:e.getTitle,width:"50%",onOk:e.handleSubmit}),{default:G(()=>[$(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Q=k(J,[["render",K]]),se=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as M,se as a,ne as c,le as s};
