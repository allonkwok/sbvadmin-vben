var D=Object.defineProperty,_=Object.defineProperties;var M=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,p=(e,t)=>{for(var o in t||(t={}))y.call(t,o)&&B(e,o,t[o]);if(I)for(var o of I(t))A.call(t,o)&&B(e,o,t[o]);return e},F=(e,t)=>_(e,M(t));var g=(e,t,o)=>new Promise((r,u)=>{var d=n=>{try{a(o.next(n))}catch(l){u(l)}},i=n=>{try{a(o.throw(n))}catch(l){u(l)}},a=n=>n.done?r(n.value):Promise.resolve(n.value).then(d,i);a((o=o.apply(e,t)).next())});import{B as P,a as k}from"./index.e25bbbe7.js";import{B as x}from"./BasicForm.487dcdb3.js";import"./componentMap.f7ad5fcd.js";import{u as S}from"./useForm.677d6921.js";import"./RadioButtonGroup.31fe683a.js";import{dB as m,au as $,a as w,v as C,k as c,f as R,aw as E,o as L,j as O,z as U,n as j,ax as N}from"./index.fd607933.js";const ee=e=>m.get({url:"/configs",params:e}),T=e=>m.post({url:"/configs",data:e}),q=e=>m.put({url:"/configs/"+e.id,data:e}),oe=e=>m.delete({url:"/configs/"+e}),te=[{title:"ID",dataIndex:"id",sorter:!0},{title:"\u914D\u7F6E\u6807\u8BC6",dataIndex:"symbol"},{title:"\u914D\u7F6E\u503C",dataIndex:"value"},{title:"\u914D\u7F6E\u540D",dataIndex:"name"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u6392\u5E8F",dataIndex:"sort"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"updatedAt"}],se=[{field:"id",label:"ID",component:"Input",colProps:{span:8}},{field:"createdAt",component:"RangePicker",label:"\u521B\u5EFA\u65E5\u671F",colProps:{span:8}}],z=[{field:"id",label:"ID",component:"InputNumber",dynamicDisabled:!0},{field:"symbol",label:"\u914D\u7F6E\u6807\u8BC6",component:"Input",required:!0},{field:"value",label:"\u914D\u7F6E\u503C",component:"Input"},{field:"name",label:"\u914D\u7F6E\u540D",component:"Input",required:!0},{field:"description",label:"\u63CF\u8FF0",component:"Input"},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber"},{field:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",component:"DatePicker"},{field:"updatedAt",label:"\u4FEE\u6539\u65F6\u95F4",component:"DatePicker"}],V=w({name:"ConfigModal",components:{BasicModal:P,BasicForm:x},emits:["success","register"],setup(e,{emit:t}){const o=C(!0),r=C(""),[u,{resetFields:d,setFieldsValue:i,validate:a}]=S({labelWidth:100,baseColProps:{span:24},schemas:z,showActionButtonGroup:!1}),[n,{setModalProps:l,closeModal:b}]=k(s=>g(this,null,function*(){d(),l({confirmLoading:!1}),o.value=!!(s!=null&&s.isUpdate),c(o)&&(r.value=s.record.id,i(p({},s.record)))})),v=R(()=>c(o)?"\u7F16\u8F91":"\u65B0\u589E");function h(){return g(this,null,function*(){try{const s=yield a();l({confirmLoading:!0}),c(o)?q(s).then(f=>{}).catch(f=>{}).finally(()=>{b(),t("success",{isUpdate:c(o),values:F(p({},s),{id:r.value})})}):T(s).then(f=>{}).catch(f=>{}).finally(()=>{t("success",{isUpdate:c(o),values:F(p({},s),{id:r.value})})}),b()}finally{l({confirmLoading:!1})}})}return{registerModal:n,registerForm:u,getTitle:v,handleSubmit:h}}});function G(e,t,o,r,u,d){const i=E("BasicForm"),a=E("BasicModal");return L(),O(a,N(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:U(()=>[j(i,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var H=$(V,[["render",G]]),ne=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as C,ne as a,te as c,oe as d,ee as g,se as s};
