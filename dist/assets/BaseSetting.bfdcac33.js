var v=(t,i,p)=>new Promise((d,m)=>{var _=e=>{try{s(p.next(e))}catch(o){m(o)}},l=e=>{try{s(p.throw(e))}catch(o){m(o)}},s=e=>e.done?d(e.value):Promise.resolve(e.value).then(_,l);s((p=p.apply(t,i)).next())});import{au as b,a as w,cD as I,C as D,s as E,N as S,fL as k,f as F,aw as n,o as C,j as B,z as r,n as a,B as f,h as U,F as T,az as R,t as N,i as V,E as $}from"./index.fd607933.js";import{T as x}from"./index.35074e10.js";/* empty css              */import{D as M}from"./index.f7287486.js";import{B as z}from"./BasicForm.487dcdb3.js";import"./componentMap.f7ad5fcd.js";import{u as L}from"./useForm.677d6921.js";import"./RadioButtonGroup.31fe683a.js";import{a as j}from"./index.702a04f2.js";import{h as G}from"./header.d801b988.js";import{b as P}from"./data.5adb4b62.js";import{u as W}from"./upload.61185e38.js";import{e as A}from"./System.7132948a.js";import{R as Z}from"./index.a30e6e53.js";import{C as q}from"./index.4d5bcc35.js";/* empty css              */import"./FormItem.vue_vue_type_script_lang.6de668b2.js";import"./index.99b1969b.js";import"./_baseIteratee.b40e6eda.js";import"./get.3f90d58a.js";import"./DeleteOutlined.fe36862c.js";import"./index.ed90e99b.js";import"./useRefs.74f2c964.js";import"./Form.d51c38ac.js";import"./Col.36cdc9bf.js";import"./useFlexGapSupport.06a0420f.js";import"./useSize.3e437db8.js";import"./uniqBy.4a44bbbc.js";import"./index.e25bbbe7.js";import"./useWindowSizeFn.3f90297d.js";import"./FullscreenOutlined.fcd749e0.js";import"./index.8fadb3a1.js";import"./Checkbox.c69cd213.js";import"./index.9ff4adc5.js";import"./index.fe7fc01f.js";import"./index.cae5315f.js";import"./index.bd73961c.js";import"./index.600d6d22.js";import"./useFormItem.4c54f273.js";import"./index.78ef151a.js";import"./eagerComputed.04145c6f.js";import"./transButton.688fd0ae.js";import"./index.c6d60ee9.js";import"./index.6dd958ab.js";import"./index.d0273064.js";import"./isNumber.a9cd6fbe.js";import"./uuid.2b29000c.js";import"./download.0725302e.js";import"./base64Conver.08b9f4ec.js";import"./index.14f64395.js";import"./index.8973fcff.js";import"./index.af5a653a.js";import"./index.8900aab6.js";const H=w({components:{Tag:x,BasicForm:z,CollapseContainer:I,Button:D,ARow:Z,ACol:q,CropperAvatar:j,Divider:M},setup(){const{createMessage:t}=$(),i=E(),[p,{setFieldsValue:d,validate:m}]=L({labelWidth:120,schemas:P,showActionButtonGroup:!1});S(()=>v(this,null,function*(){const o=yield k();d(o)}));const _=F(()=>{const{avatar:o}=i.getUserInfo;return o||G}),l=F(()=>{const{roles:o}=i.getUserInfo;return o||[]});function s({source:o,data:u}){const c=i.getUserInfo;c.avatar=o,i.setUserInfo(c);const g={id:c.userId,avatar:u.result};A(g).then(()=>{t.success("\u4FEE\u6539\u6210\u529F!")}).catch(()=>{t.error("3")}).finally(()=>{})}function e(){return v(this,null,function*(){const o=yield m();A(o).then(u=>{t.success(u)}).catch(()=>{t.error("3")}).finally(()=>{})})}return{avatar:_,roles:l,register:p,uploadApi:W,updateAvatar:s,handleSubmit:e}}}),J={class:"change-avatar"};function K(t,i,p,d,m,_){const l=n("BasicForm"),s=n("a-col"),e=n("Divider"),o=n("Tag"),u=n("a-row"),c=n("CropperAvatar"),g=n("Button"),y=n("CollapseContainer");return C(),B(y,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:r(()=>[a(u,{gutter:24},{default:r(()=>[a(s,{span:14},{default:r(()=>[a(l,{onRegister:t.register},null,8,["onRegister"])]),_:1}),a(s,{span:10},{default:r(()=>[a(e,null,{default:r(()=>[f("\u8D26\u53F7\u89D2\u8272")]),_:1}),a(u,{gutter:24},{default:r(()=>[(C(!0),U(T,null,R(t.roles,h=>(C(),B(o,{key:h.value,color:"green"},{default:r(()=>[f(N(h.nameZh),1)]),_:2},1024))),128))]),_:1}),a(e,null,{default:r(()=>[f("\u5934\u50CF")]),_:1}),a(u,{gutter:24},{default:r(()=>[V("div",J,[a(c,{uploadApi:t.uploadApi,value:t.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:t.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1})]),_:1}),a(g,{type:"primary",onClick:t.handleSubmit},{default:r(()=>[f(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}var Qo=b(H,[["render",K],["__scopeId","data-v-941958e6"]]);export{Qo as default};
