var v=(t,i,p)=>new Promise((d,m)=>{var _=e=>{try{s(p.next(e))}catch(o){m(o)}},l=e=>{try{s(p.throw(e))}catch(o){m(o)}},s=e=>e.done?d(e.value):Promise.resolve(e.value).then(_,l);s((p=p.apply(t,i)).next())});import{au as b,a as w,cD as I,C as D,s as E,N as S,fL as k,f as F,aw as n,o as C,j as B,z as r,n as a,B as f,h as U,F as T,az as R,t as N,i as V,E as $}from"./index.06197a05.js";import{T as x}from"./index.a263daea.js";/* empty css              */import{D as M}from"./index.331f4624.js";import{B as z}from"./BasicForm.31adc009.js";import"./componentMap.5caad297.js";import{u as L}from"./useForm.c6a3abab.js";import"./RadioButtonGroup.7c6e0b74.js";import{a as j}from"./index.d7bf7c56.js";import{h as G}from"./header.d801b988.js";import{b as P}from"./data.5adb4b62.js";import{u as W}from"./upload.f97e2e02.js";import{e as A}from"./System.85248233.js";import{R as Z}from"./index.fc2189e9.js";import{C as q}from"./index.35d466b8.js";/* empty css              */import"./FormItem.vue_vue_type_script_lang.0e7d13ec.js";import"./index.9d548e17.js";import"./_baseIteratee.33514218.js";import"./get.77d0a2d9.js";import"./DeleteOutlined.0c059030.js";import"./index.2ba1bcf0.js";import"./useRefs.0486652e.js";import"./Form.512cbab8.js";import"./Col.f228daeb.js";import"./useFlexGapSupport.6ab3be12.js";import"./useSize.8a56df5e.js";import"./uniqBy.cb625a5f.js";import"./index.8c595bf9.js";import"./useWindowSizeFn.0475e23c.js";import"./FullscreenOutlined.37c0aead.js";import"./index.c8045c20.js";import"./Checkbox.1ce71871.js";import"./index.33f2d271.js";import"./index.bf04fc2a.js";import"./index.44109d36.js";import"./index.7cab04ca.js";import"./index.c411709a.js";import"./useFormItem.9a1b3011.js";import"./index.b952814e.js";import"./eagerComputed.1e3d7237.js";import"./transButton.3c6c09fc.js";import"./index.119acab0.js";import"./index.a38b09b9.js";import"./index.f17c6d02.js";import"./isNumber.6cc9e99f.js";import"./uuid.2b29000c.js";import"./download.5e2aa8fb.js";import"./base64Conver.08b9f4ec.js";import"./index.10851f07.js";import"./index.fd9b44e9.js";import"./index.41ee0a07.js";import"./index.9952bbab.js";const H=w({components:{Tag:x,BasicForm:z,CollapseContainer:I,Button:D,ARow:Z,ACol:q,CropperAvatar:j,Divider:M},setup(){const{createMessage:t}=$(),i=E(),[p,{setFieldsValue:d,validate:m}]=L({labelWidth:120,schemas:P,showActionButtonGroup:!1});S(()=>v(this,null,function*(){const o=yield k();d(o)}));const _=F(()=>{const{avatar:o}=i.getUserInfo;return o||G}),l=F(()=>{const{roles:o}=i.getUserInfo;return o||[]});function s({source:o,data:u}){const c=i.getUserInfo;c.avatar=o,i.setUserInfo(c);const g={id:c.userId,avatar:u.result};A(g).then(()=>{t.success("\u4FEE\u6539\u6210\u529F!")}).catch(()=>{t.error("3")}).finally(()=>{})}function e(){return v(this,null,function*(){const o=yield m();A(o).then(u=>{t.success(u)}).catch(()=>{t.error("3")}).finally(()=>{})})}return{avatar:_,roles:l,register:p,uploadApi:W,updateAvatar:s,handleSubmit:e}}}),J={class:"change-avatar"};function K(t,i,p,d,m,_){const l=n("BasicForm"),s=n("a-col"),e=n("Divider"),o=n("Tag"),u=n("a-row"),c=n("CropperAvatar"),g=n("Button"),y=n("CollapseContainer");return C(),B(y,{title:"\u57FA\u672C\u8BBE\u7F6E",canExpan:!1},{default:r(()=>[a(u,{gutter:24},{default:r(()=>[a(s,{span:14},{default:r(()=>[a(l,{onRegister:t.register},null,8,["onRegister"])]),_:1}),a(s,{span:10},{default:r(()=>[a(e,null,{default:r(()=>[f("\u8D26\u53F7\u89D2\u8272")]),_:1}),a(u,{gutter:24},{default:r(()=>[(C(!0),U(T,null,R(t.roles,h=>(C(),B(o,{key:h.value,color:"green"},{default:r(()=>[f(N(h.nameZh),1)]),_:2},1024))),128))]),_:1}),a(e,null,{default:r(()=>[f("\u5934\u50CF")]),_:1}),a(u,{gutter:24},{default:r(()=>[V("div",J,[a(c,{uploadApi:t.uploadApi,value:t.avatar,btnText:"\u66F4\u6362\u5934\u50CF",btnProps:{preIcon:"ant-design:cloud-upload-outlined"},onChange:t.updateAvatar,width:"150"},null,8,["uploadApi","value","onChange"])])]),_:1})]),_:1})]),_:1}),a(g,{type:"primary",onClick:t.handleSubmit},{default:r(()=>[f(" \u66F4\u65B0\u57FA\u672C\u4FE1\u606F ")]),_:1},8,["onClick"])]),_:1})}var Qo=b(H,[["render",K],["__scopeId","data-v-941958e6"]]);export{Qo as default};
