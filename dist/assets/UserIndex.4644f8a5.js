import{B as k}from"./TableImg.3408e1a1.js";import{l as B}from"./BasicForm.c5e66a6c.js";import{u as F}from"./useTable.4289d9c7.js";import{i as S,j as w}from"./System.73137b3d.js";import{P as D}from"./index.c4931ba9.js";import{A as I}from"./index.ba507005.js";import{b as v}from"./index.88d64ff1.js";import{A as E,c as M,s as P}from"./UserModal.5ff20481.js";import{aw as R,a as U,aZ as V,w as W,ay as n,o as i,j as l,z as r,n as c,B as T,h as $,F as N,aB as j,t as x,l as z}from"./index.aef79208.js";import{A as H}from"./index.218ca60e.js";import{T as L}from"./index.ba19ca66.js";import"./index.83ab6671.js";import"./Checkbox.1d2d0a80.js";import"./index.29676f2b.js";import"./index.cdf63b6f.js";import"./eagerComputed.1c9ed21e.js";import"./useForm.84254c51.js";import"./index.7d383180.js";import"./index.a5a7b8ac.js";import"./uuid.2b29000c.js";import"./index.278bbb02.js";import"./_baseIteratee.ee88bd48.js";import"./get.083c96ca.js";import"./DeleteOutlined.692f9018.js";import"./index.3f0fd92d.js";import"./useRefs.66483b8f.js";import"./Form.1bdfcb04.js";import"./Col.cde1cdc2.js";import"./useFlexGapSupport.b65cfcab.js";import"./useSize.8e5c3633.js";import"./useWindowSizeFn.17123558.js";import"./index.a57c6656.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.e2185902.js";import"./FullscreenOutlined.e6006c69.js";import"./index.208aa57a.js";import"./fromPairs.84aabb58.js";import"./scrollTo.58c6edf0.js";import"./index.8691811c.js";/* empty css              *//* empty css              */import"./index.f4413102.js";import"./transButton.f4117c01.js";import"./index.353a0fda.js";import"./index.a9c6cbef.js";import"./download.27427d73.js";import"./base64Conver.08b9f4ec.js";import"./index.5cebee16.js";import"./index.f85c5520.js";import"./uniqBy.c8253166.js";import"./index.59391880.js";import"./useContentViewHeight.ce900a42.js";import"./ArrowLeftOutlined.ab1f1b5a.js";import"./index.f922794d.js";const O=U({name:"AccountManagement",components:{BasicTable:k,PageWrapper:D,AccountModal:E,TableAction:B,Avatar:H,Tag:L,Authority:I},setup(){const e=V(),[y,{openModal:m}]=v(),p=W({}),[C,{reload:s,updateTableDataRecord:u}]=F({title:"\u8D26\u53F7\u5217\u8868",api:S,rowKey:"id",columns:M,formConfig:{labelWidth:120,schemas:P,autoSubmitOnEnter:!0},useSearchForm:!0,showTableSetting:!0,bordered:!0,handleSearchInfoFn(o){return o},actionColumn:{width:120,title:"\u64CD\u4F5C",dataIndex:"action"}});function d(){m(!0,{isUpdate:!1})}function f(o){m(!0,{record:o,isUpdate:!0})}function h(o){o.id,w(o.id).then(t=>{}).catch(t=>{}).finally(()=>{s()})}function g({isUpdate:o,values:t}){if(o){const a=u(t.id,t)}else s()}function _(o=""){p.deptId=o,s()}function b(o){e("/system/account_detail/"+o.id)}return{registerTable:C,registerModal:y,handleCreate:d,handleEdit:f,handleDelete:h,handleSuccess:g,handleSelect:_,handleView:b,searchInfo:p}}});function Z(e,y,m,p,C,s){const u=n("a-button"),d=n("Authority"),f=n("Avatar"),h=n("Tag"),g=n("TableAction"),_=n("BasicTable"),b=n("AccountModal"),o=n("PageWrapper");return i(),l(o,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:r(()=>[c(_,{onRegister:e.registerTable,class:"w-3/4 xl:w-4/5",searchInfo:e.searchInfo},{toolbar:r(()=>[c(d,{value:"/api/users|POST"},{default:r(()=>[c(u,{type:"primary",onClick:e.handleCreate},{default:r(()=>[T("\u65B0\u589E\u8D26\u53F7")]),_:1},8,["onClick"])]),_:1})]),bodyCell:r(({column:t,record:a})=>[t.key==="avatar"?(i(),l(f,{key:0,size:60,src:a.avatar},null,8,["src"])):t.key==="roles"?(i(!0),$(N,{key:1},j(a.roles,A=>(i(),l(h,{key:A.name,color:"green"},{default:r(()=>[T(x(A.nameZh),1)]),_:2},1024))),128)):t.key==="action"?(i(),l(g,{key:2,actions:[{icon:"clarity:info-standard-line",tooltip:"\u67E5\u770B\u7528\u6237\u8BE6\u60C5",onClick:e.handleView.bind(null,a)},{icon:"clarity:note-edit-line",tooltip:"\u7F16\u8F91\u7528\u6237\u8D44\u6599",onClick:e.handleEdit.bind(null,a)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"\u5220\u9664\u6B64\u8D26\u53F7",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",placement:"left",confirm:e.handleDelete.bind(null,a)}}]},null,8,["actions"])):z("",!0)]),_:1},8,["onRegister","searchInfo"]),c(b,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1})}var Ko=R(O,[["render",Z]]);export{Ko as default};
