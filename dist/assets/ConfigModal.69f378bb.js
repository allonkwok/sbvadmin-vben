var D=Object.defineProperty,_=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var I=Object.getOwnPropertySymbols;var M=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var C=(e,t,o)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,m=(e,t)=>{for(var o in t||(t={}))M.call(t,o)&&C(e,o,t[o]);if(I)for(var o of I(t))A.call(t,o)&&C(e,o,t[o]);return e},F=(e,t)=>_(e,y(t));var g=(e,t,o)=>new Promise((i,r)=>{var p=s=>{try{a(o.next(s))}catch(l){r(l)}},c=s=>{try{a(o.throw(s))}catch(l){r(l)}},a=s=>s.done?i(s.value):Promise.resolve(s.value).then(p,c);a((o=o.apply(e,t)).next())});import{B as P,a as k}from"./index.e12d43d2.js";import{B as x}from"./BasicForm.65e5c1fa.js";import{u as S}from"./useForm.7493826a.js";import{dK as f,aw as $,a as w,v as B,k as d,f as R,ay as E,o as L,j as O,z as U,n as j,az as z}from"./index.4ad633c8.js";const Y=e=>f.get({url:"/configs",params:e}),N=e=>f.post({url:"/configs",data:e}),T=e=>f.put({url:"/configs/"+e.id,data:e}),Z=e=>f.delete({url:"/configs/"+e}),ee=[{title:"ID",dataIndex:"id",sorter:!0},{title:"\u914D\u7F6E\u6807\u8BC6",dataIndex:"symbol"},{title:"\u914D\u7F6E\u503C",dataIndex:"value"},{title:"\u914D\u7F6E\u540D",dataIndex:"name"},{title:"\u63CF\u8FF0",dataIndex:"description"},{title:"\u6392\u5E8F",dataIndex:"sort"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createdAt"},{title:"\u4FEE\u6539\u65F6\u95F4",dataIndex:"updatedAt"}],oe=[{field:"id",label:"ID",component:"Input",colProps:{span:8}},{field:"createdAt",component:"RangePicker",label:"\u521B\u5EFA\u65E5\u671F",colProps:{span:8}}],q=[{field:"id",label:"ID",component:"InputNumber",dynamicDisabled:!0},{field:"symbol",label:"\u914D\u7F6E\u6807\u8BC6",component:"Input",required:!0},{field:"value",label:"\u914D\u7F6E\u503C",component:"Input"},{field:"name",label:"\u914D\u7F6E\u540D",component:"Input",required:!0},{field:"description",label:"\u63CF\u8FF0",component:"Input"},{field:"sort",label:"\u6392\u5E8F",component:"InputNumber"},{field:"createdAt",label:"\u521B\u5EFA\u65F6\u95F4",component:"DatePicker"},{field:"updatedAt",label:"\u4FEE\u6539\u65F6\u95F4",component:"DatePicker"}],V=w({name:"ConfigModal",components:{BasicModal:P,BasicForm:x},emits:["success","register"],setup(e,{emit:t}){const o=B(!0),i=B(""),[r,{resetFields:p,setFieldsValue:c,validate:a}]=S({labelWidth:100,baseColProps:{span:24},schemas:q,showActionButtonGroup:!1}),[s,{setModalProps:l,closeModal:b}]=k(n=>g(this,null,function*(){p(),l({confirmLoading:!1}),o.value=!!(n!=null&&n.isUpdate),d(o)&&(i.value=n.record.id,c(m({},n.record)))})),v=R(()=>d(o)?"\u7F16\u8F91":"\u65B0\u589E");function h(){return g(this,null,function*(){try{const n=yield a();l({confirmLoading:!0}),d(o)?T(n).then(u=>{}).catch(u=>{}).finally(()=>{b(),t("success",{isUpdate:d(o),values:F(m({},n),{id:i.value})})}):N(n).then(u=>{}).catch(u=>{}).finally(()=>{t("success",{isUpdate:d(o),values:F(m({},n),{id:i.value})})}),b()}finally{l({confirmLoading:!1})}})}return{registerModal:s,registerForm:r,getTitle:v,handleSubmit:h}}});function G(e,t,o,i,r,p){const c=E("BasicForm"),a=E("BasicModal");return L(),O(a,z(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:U(()=>[j(c,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var H=$(V,[["render",G]]),te=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as C,te as a,ee as c,Z as d,Y as g,oe as s};
