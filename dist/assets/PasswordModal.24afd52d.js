var c=(o,i,r)=>new Promise((u,a)=>{var m=e=>{try{t(r.next(e))}catch(s){a(s)}},n=e=>{try{t(r.throw(e))}catch(s){a(s)}},t=e=>e.done?u(e.value):Promise.resolve(e.value).then(m,n);t((r=r.apply(o,i)).next())});import{B as w,a as h}from"./index.88d64ff1.js";import{B as F}from"./BasicForm.c5e66a6c.js";import{u as C}from"./useForm.84254c51.js";import{c as M}from"./System.73137b3d.js";import{aw as P,a as _,v as E,s as b,ay as f,o as v,j as y,z as S,n as A,az as I,E as O}from"./index.aef79208.js";import"./useWindowSizeFn.17123558.js";import"./FullscreenOutlined.e6006c69.js";/* empty css              *//* empty css              */import"./index.a57c6656.js";import"./index.83ab6671.js";import"./Checkbox.1d2d0a80.js";import"./index.29676f2b.js";import"./index.ba19ca66.js";import"./index.7d383180.js";import"./index.a5a7b8ac.js";import"./index.f4413102.js";import"./get.083c96ca.js";import"./index.cdf63b6f.js";import"./eagerComputed.1c9ed21e.js";import"./index.278bbb02.js";import"./_baseIteratee.ee88bd48.js";import"./DeleteOutlined.692f9018.js";import"./index.3f0fd92d.js";import"./useRefs.66483b8f.js";import"./Form.1bdfcb04.js";import"./Col.cde1cdc2.js";import"./useFlexGapSupport.b65cfcab.js";import"./useSize.8e5c3633.js";import"./transButton.f4117c01.js";import"./index.353a0fda.js";import"./index.a9c6cbef.js";import"./index.208aa57a.js";import"./uuid.2b29000c.js";import"./download.27427d73.js";import"./base64Conver.08b9f4ec.js";import"./index.5cebee16.js";import"./index.f85c5520.js";import"./uniqBy.c8253166.js";const R=[{field:"passwordOld",label:"\u5F53\u524D\u5BC6\u7801",component:"InputPassword",required:!0},{field:"passwordNew",label:"\u65B0\u5BC6\u7801",component:"StrengthMeter",componentProps:{placeholder:"\u65B0\u5BC6\u7801"},rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u65B0\u5BC6\u7801"}]},{field:"confirmPassword",label:"\u786E\u8BA4\u5BC6\u7801",component:"InputPassword",dynamicRules:({values:o})=>[{required:!0,validator:(i,r)=>r?r!==o.passwordNew?Promise.reject("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4!"):Promise.resolve():Promise.reject("\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A")}]}],$=_({name:"PasswordModal",components:{BasicModal:w,BasicForm:F},emits:["success","register"],setup(){const o=E(!0),i=b(),[r,{resetFields:u,validate:a}]=C({labelWidth:100,baseColProps:{span:24},schemas:R,showActionButtonGroup:!1,actionColOptions:{span:23}}),[m,{setModalProps:n,closeModal:t}]=h(s=>c(this,null,function*(){u(),n({confirmLoading:!1}),o.value=!!(s!=null&&s.isUpdate)}));function e(){return c(this,null,function*(){try{const{createMessage:s}=O(),B=yield a(),{passwordOld:l,passwordNew:d}=B,g={id:i.getUserInfo.userId,passwordOld:l,passwordNew:d};M(g).then(p=>{}).catch(p=>{}).finally(()=>{t()})}catch(s){}})}return{registerModal:m,registerForm:r,handleSubmit:e}}});function k(o,i,r,u,a,m){const n=f("BasicForm"),t=f("BasicModal");return v(),y(t,I(o.$attrs,{onRegister:o.registerModal,title:"\u4FEE\u6539\u5BC6\u7801",onOk:o.handleSubmit}),{default:S(()=>[A(n,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","onOk"])}var _o=P($,[["render",k]]);export{_o as default};
